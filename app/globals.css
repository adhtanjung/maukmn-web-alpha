@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme inline {
	--font-sans: var(--font-plus-jakarta-sans);

	--radius: 0.75rem;
	--radius-default: 1rem;
	--radius-lg: 2rem;
	--radius-xl: 3rem;

	--color-primary: var(--primary);
	--color-primary-foreground: var(--primary-foreground);
	--color-secondary: var(--secondary);
	--color-secondary-foreground: var(--secondary-foreground);
	--color-accent: var(--accent);
	--color-accent-foreground: var(--accent-foreground);
	--color-destructive: var(--destructive);
	--color-destructive-foreground: var(--destructive-foreground);
	--color-muted: var(--muted);
	--color-muted-foreground: var(--muted-foreground);
	--color-card: var(--card);
	--color-card-foreground: var(--card-foreground);
	--color-popover: var(--popover);
	--color-popover-foreground: var(--popover-foreground);
	--color-border: var(--border);
	--color-input: var(--input);
	--color-ring: var(--ring);

	--color-background: var(--background);
	--color-foreground: var(--foreground);

	--color-sidebar: var(--sidebar);
	--color-sidebar-foreground: var(--sidebar-foreground);
	--color-sidebar-primary: var(--sidebar-primary);
	--color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
	--color-sidebar-accent: var(--sidebar-accent);
	--color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
	--color-sidebar-border: var(--sidebar-border);
	--color-sidebar-ring: var(--sidebar-ring);

	--image-gradient-fade: linear-gradient(
		to top,
		rgba(24, 24, 27, 1) 0%,
		/* Obsidian Fade */ rgba(24, 24, 27, 0.8) 25%,
		rgba(24, 24, 27, 0) 100%
	);
}

@utility no-scrollbar {
	&::-webkit-scrollbar {
		display: none;
	}
	-ms-overflow-style: none;
	scrollbar-width: none;
}

@utility mask-linear-fade {
	mask-image: linear-gradient(to right, black 90%, transparent 100%);
	-webkit-mask-image: linear-gradient(to right, black 90%, transparent 100%);
}

@utility safe-top {
	padding-top: env(safe-area-inset-top);
}

@utility safe-bottom {
	padding-bottom: env(safe-area-inset-bottom);
}

@utility safe-left {
	padding-left: env(safe-area-inset-left);
}

@utility safe-right {
	padding-right: env(safe-area-inset-right);
}

@utility bottom-nav-spacing {
	padding-bottom: calc(80px + 1rem + env(safe-area-inset-bottom));
}

@utility overscroll-contain {
	overscroll-behavior: contain;
}

@utility filled {
	font-variation-settings:
		"FILL" 1,
		"wght" 400,
		"GRAD" 0,
		"opsz" 24;
}

@layer base {
	:root {
		/*
          Maukemana "Tactical Day" Palette (Light Mode)
          - High Contrast Flight Manual Style
        */

		/* Backgrounds: Ice White */
		--background: #ffffff;
		--foreground: #18181b; /* Obsidian Text */

		/* Cards & Surfaces */
		--card: #f4f4f5; /* Zinc-100 */
		--card-foreground: #18181b;
		--popover: #ffffff;
		--popover-foreground: #18181b;

		/* Brand Primary: Blaze Orange */
		--primary: #ff4500;
		--primary-foreground: #ffffff;

		/* Brand Secondary: Platinum (Used for Rank Badges) */
		--secondary: #e4e4e7; /* Zinc-200 */
		--secondary-foreground: #18181b;

		/* Muted */
		--muted: #f4f4f5;
		--muted-foreground: #71717a; /* Zinc-500 */

		/* Accent: Light Orange Tint for hovers */
		--accent: #fff7ed; /* Orange-50 */
		--accent-foreground: #ff4500;

		/* Neutrals */
		--border: #e4e4e7; /* Zinc-200 */
		--input: #e4e4e7;
		--ring: #ff4500;

		/* Sidebar */
		--sidebar: #f4f4f5;
		--sidebar-foreground: #18181b;
		--sidebar-primary: #ff4500;
		--sidebar-primary-foreground: #ffffff;
		--sidebar-accent: #e4e4e7;
		--sidebar-accent-foreground: #18181b;
		--sidebar-border: #e4e4e7;
		--sidebar-ring: #ff4500;

		/* Destructive */
		--destructive: #ef4444;
		--destructive-foreground: #ffffff;

		--radius: 0.75rem;

		/* Chart colors (Mapped for Logic) */
		--chart-1: #ff4500; /* Blaze Orange (Primary) */
		--chart-2: #00e096; /* Neon Mint (Verified/Success) */
		--chart-3: #18181b; /* Obsidian (Dark details) */
		--chart-4: #3b82f6; /* Info Blue */
		--chart-5: #e4e4e7; /* Zinc */
	}

	.dark {
		/*
          Maukemana "Magma & Obsidian" Palette (Dark Mode - Default)
          - The Tactical Scout Experience
        */

		/* Backgrounds: Obsidian (Zinc-950) - Not pure black */
		--background: #18181b;
		--foreground: #fafafa; /* Zinc-50 */

		/* Cards: Smoked Glass (Zinc-900) */
		--card: #27272a;
		--card-foreground: #fafafa;
		--popover: #27272a;
		--popover-foreground: #fafafa;

		/* Primary: Blaze Orange (Still pops on dark) */
		--primary: #ff4500;
		--primary-foreground: #ffffff;

		/* Secondary: Platinum / Silver (For Juragan Badges) */
		--secondary: #f4f4f5; /* Zinc-100 */
		--secondary-foreground: #18181b; /* Dark text on Badge */

		/* Muted: Deep Grey */
		--muted: #27272a;
		--muted-foreground: #a1a1aa; /* Zinc-400 */

		/* Accent: Smoked Glass Hover */
		--accent: #3f3f46; /* Zinc-700 */
		--accent-foreground: #fafafa;

		--border: #27272a; /* Soft borders for glass effect */
		--input: #27272a;
		--ring: #ff4500; /* Orange Focus Rings */

		--sidebar: #18181b;
		--sidebar-foreground: #fafafa;
		--sidebar-primary: #ff4500;
		--sidebar-primary-foreground: #ffffff;
		--sidebar-accent: #27272a;
		--sidebar-accent-foreground: #fafafa;
		--sidebar-border: #27272a;
		--sidebar-ring: #ff4500;

		--destructive: #7f1d1d;
		--destructive-foreground: #fafafa;

		/* Chart colors re-mapped for Dark Mode */
		--chart-1: #ff4500; /* Blaze Orange */
		--chart-2: #00e096; /* Neon Mint (The "Verified" Signal) */
		--chart-3: #f4f4f5; /* Platinum */
		--chart-4: #60a5fa; /* Blue */
		--chart-5: #3f3f46; /* Zinc-700 */
	}
}

@layer base {
	body {
		@apply bg-background text-foreground font-sans;
		min-height: 100dvh;
	}
	* {
		@apply border-border;
	}
	/* MapLibre Popup Overrides for Glassmorphism */
	.maplibregl-popup-content {
		@apply bg-card/90! backdrop-blur-md! shadow-xl! p-0! rounded-xl! border border-border!;
	}
	.maplibregl-popup-tip {
		@apply border-t-card/90!;
	}
	/* Close button styling for popups */
	.maplibregl-popup-close-button {
		@apply text-muted-foreground hover:text-primary text-xl px-2 py-1 rounded-tr-xl focus:outline-none!;
	}

	@keyframes pin-bounce {
		0% {
			transform: scale(0);
			opacity: 0;
		}
		60% {
			transform: scale(1.1);
		}
		100% {
			transform: scale(1);
			opacity: 1;
		}
	}

	@keyframes pulse-ring {
		0% {
			transform: scale(0.8);
			opacity: 0.5;
			box-shadow: 0 0 0 0 rgba(255, 69, 0, 0.7); /* Orange Glow */
		}
		70% {
			transform: scale(1);
			opacity: 0;
			box-shadow: 0 0 0 10px rgba(255, 69, 0, 0);
		}
		100% {
			transform: scale(0.8);
			opacity: 0;
		}
	}

	.pin-bounce {
		animation: pin-bounce 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
	}

	.pulse-ring-orange {
		animation: pulse-ring 2s infinite;
	}
}
